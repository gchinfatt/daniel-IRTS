@model DanielIncidentReporting.Models.RegisterViewModel
@{
    ViewBag.Title = "Register";
}

<h2>@ViewBag.Title</h2>
<br />

<h4>Create a new account</h4>

<div>
    @using (Html.BeginForm("Register", "Account", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
    {
        @Html.AntiForgeryToken()
        <div class="form-horizontal">

            <hr/>

            @Html.HiddenFor(model => model.isActive, new { @Value = "1" })
            <div>
                <table class="table-borderless">
                    <tr>
                        <td class="size-3-wide">
                            @Html.LabelFor(m => m.Email, new { @class = "raptorLabel" })
                        </td>
                        <td class="size-6-wide">
                            @Html.TextBoxFor(m => m.Email, new {@class = "raptorInputText", maxlength = "255"})
                            @Html.ValidationMessageFor(m => m.Email, "", new {@class = "text-danger"})
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td class="spacer-height2" colspan="2"></td>
                    </tr>
                    <tr>
                        <td>
                            @Html.LabelFor(m => m.Password, new { @class = "raptorLabel" })
                        </td>
                        <td>
                            @Html.PasswordFor(m => m.Password, new { @class = "raptorInputText" })
                            @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
                        </td>
                    </tr>
                    <tr>
                        <td class="spacer-height2" colspan="2"></td>
                    </tr>
                    <tr>
                        <td>
                            @Html.LabelFor(m => m.ConfirmPassword, new { @class = "raptorLabel" })
                        </td>
                        <td>
                            @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "raptorInputText" })
                            @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
                        </td>
                    </tr>
                    <tr>
                        <td class="spacer-height2" colspan="2"></td>
                    </tr>


                    <tr>
                        <td>
                            @Html.LabelFor(m => m.mgrPosition, new { @class = "raptorLabel" })
                        </td>
                        <td>
                            @Html.DropDownList("mgrPosition", ViewBag.managerItems as List<SelectListItem>, new { @class = "raptorInputText" })
                            @Html.ValidationMessageFor(m => m.mgrPosition, "", new { @class = "text-danger" })
                        </td>
                    </tr>

                    <tr>
                        <td class="spacer-height2" colspan="2"></td>
                    </tr>

                    <tr id="ProgramsDD">
                        <td>
                            @Html.LabelFor(m => m.Program, new { @class = "raptorLabel" })
                        </td>
                        <td>
                            @Html.DropDownListFor(m => m.Program, (SelectList)ViewBag.programs, new { @id = "program", @class = "raptorInputText" })
                            @Html.ValidationMessageFor(m => m.Program, "", new { @class = "text-danger" })
                        </td>
                    </tr>

                    <tr>
                        <td class="spacer-height2" colspan="2"></td>
                    </tr>
                    <tr>
                        <td>
                            <input type="submit" class="btn btn-default" value="Register" />
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    }
</div>

<script language="javascript" type="text/javascript">

    //hides programs if position (in the dropdown) Position is "Risk Manager"
    $(function () {
        $('#mgrPosition').change(function () {
            var value = $(this).val();
            if (value == 'Risk Manager') {
                $('#ProgramsDD').hide();
                //$('#program').val("Administration");
            }
            else {
                $('#ProgramsDD').show();
                $('#program').val(null);
            }
        });
    });
</script>
