@model DanielIncidentReporting.Models.RegisterViewModel
@{
    ViewBag.Title = "Register";
}

<h2>@ViewBag.Title</h2>
<br />

<h4>Create a new account</h4>

<div>
    @using (Html.BeginForm("Register", "Account", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
    {
        @Html.AntiForgeryToken()
        <div class="form-horizontal">

            <hr />

            @Html.ValidationSummary("", new { @class = "text-danger" })
            @Html.HiddenFor(model => model.isActive, new { @Value = "1" })
            <div>
                <table>
                    <tr>
                        <td>
                            @Html.LabelFor(m => m.Email, new { @class = "small-label" })
                        </td>
                        <td>
                            @Html.TextBoxFor(m => m.Email, new { @class = "large-textinput", maxlength = "255" })
                            @Html.ValidationMessageFor(m => m.Email, "", new { @class = "text-danger" })
                        </td>
                    </tr>
                    <tr>
                        <td class="spacer-height2" colspan="2"></td>
                    </tr>
                    <tr>
                        <td>
                            @Html.LabelFor(m => m.Password, new { @class = "small-label" })
                        </td>
                        <td>
                            @Html.PasswordFor(m => m.Password, new { @class = "large-textinput" })
                            @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
                        </td>
                    </tr>
                    <tr>
                        <td class="spacer-height2" colspan="2"></td>
                    </tr>
                    <tr>
                        <td>
                            @Html.LabelFor(m => m.ConfirmPassword, new { @class = "small-label" })
                        </td>
                        <td>
                            @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "large-textinput" })
                            @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
                        </td>
                    </tr>
                    <tr>
                        <td class="spacer-height2" colspan="2"></td>
                    </tr>


                    <tr>
                        <td>
                            @Html.LabelFor(m => m.mgrPosition, new { @class = "small-label" })
                        </td>
                        <td>
                            @Html.DropDownList("mgrPosition", ViewBag.managerItems as List<SelectListItem>, new {@class = "large-textinput"})
                            @Html.ValidationMessageFor(m => m.mgrPosition, "", new {@class = "text-danger"})
                        </td>
                    </tr>
                    
                    <tr>
                        <td class="spacer-height2" colspan="2"></td>
                    </tr>

                    <tr id="ProgramsDD">
                        <td>
                            @Html.LabelFor(m => m.Program, new { @class = "small-label" })
                        </td>
                        <td>
                            @Html.DropDownListFor(m => m.Program, (SelectList)ViewBag.programs, new { @id = "program", @class = "large-textinput" })
                            @Html.ValidationMessageFor(m => m.Program, "", new { @class = "text-danger" })
                        </td>
                    </tr>

                    <tr>
                        <td class="spacer-height2" colspan="2"></td>
                    </tr>
                    <tr>
                        <td>
                            <input type="submit" class="btn btn-default" value="Register" />
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    }
</div>
<script language="javascript" type="text/javascript">

    //hides programs if position (in the dropdown) Position is "Risk Manager"
        $(function ()
        {
            $('#mgrPosition').change(function ()
            {
                var value = $(this).val();
                if (value == 'Risk Manager')
                {
                    $('#ProgramsDD').hide();
                    //$('#program').val("Administration");
                }
                else {
                    $('#ProgramsDD').show();
                    $('#program').val(null);
                }
            });
        });
</script>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}